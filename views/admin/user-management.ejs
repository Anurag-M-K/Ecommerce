<main class="main-container">
  <div class="main-title">
    <p class="font-weight-bold">USERS</p>
  </div>


     
      
        <!--   -->


        <table class="table table-bordered"  style="border: 1px solid black; margin-top: 75px ; margin-left: 75px;"  >

          <thead class="bg-secondary" >
            <tr>
              <th>Name</th>
              <th>Surname</th>
              <th>Email</th>
              <th>Phone</th>
              <th>Actions</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <% for(var i=0;i<userDetails.length;i++) { %>
              <tr>
               <td> <%= userDetails[i].Name %></td>
              <td> <%= userDetails[i].Lname%></td>
               <td><%= userDetails[i].Email%></td>
               <td> <%= userDetails[i].Phone %></td>
                 
                

                <td>
                  <% if (userDetails[i].state=="active" ) { %>
                    <button onclick="userBlock('<%= userDetails[i]._id %>')" 
                     style="background:#5E4543 ;" class="btn btn-primary" >Block</button>  
                    <% } else{ %>
                      <button onclick="userUnBlock('<%= userDetails[i]._id %>')" style="background: #c5cf64;" class="btn btn-primary"
                        >Unblock</button>
                    <% } %>
                    
                    </td>
              

              </tr>
              <% } %>




          </tbody>
        </table>
    </div>

        

    <script>
     function userBlock(userId){
      fetch('/admin/userManagement/block',{
        method:'POST',
        headers:{'content-type':'application/json'},
        body: JSON.stringify({userId})
      }).then(()=>{
        window.location.reload();
      }).catch((error)=>{
        console.error("error: ", error)
      })
     }


     function userUnBlock(userId)
{
  fetch('/admin/userManagement/unblock',{
    method : "POST",
    headers : {'content-type':'application/json'},
    body:JSON.stringify({userId})
  }).then(()=>{
    window.location.reload()
  }).catch((error)=>{
    console.error("error:",error)
  })
}    </script>